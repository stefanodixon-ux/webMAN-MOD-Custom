<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
	<meta cache>
	<title>webMAN MOD</title>
</head>

<style type="text/css">
html, body { height:100%; }
body {
	padding:0;
	margin:0;
	background:#333;
	-webkit-user-select:none;
	-webkit-text-size-adjust:none;
	color:#eee;
	font-family:helvetica;
	font-size:12px;
}

#wrapper {
	width:100%;
	min-width:320px;
	height:100%;
	/*background: url("background.gif") fixed center;*/
	/*background-size: 100% 100%;*/
}

#iwrap {
	opacity:0.3;
	background:#000;
	width:230px;
	height: 32px;
	-moz-border-radius:7px;
	-webkit-border-radius:7px;
	border-radius:7px;
	overflow:hidden;
	-ms-zoom: 0.75;
	-moz-transform: scale(0.75);
	-moz-transform-origin: 0 0;
	-o-transform: scale(0.75);
	-o-transform-origin: 0 0;
	-webkit-transform: scale(0.75);
	-webkit-transform-origin: 0 0;
	position:absolute;top:23px;right:70px;z-order:9999;
}

#nav {
	position:absolute;
	z-index:100;
	top:8px;
	width:200px;
	height:24px;
	left:50%;
	background:rgba(0,0,0,0.75);
	padding:0;
	margin:0 0 0 -100px;
	-webkit-border-radius:10px;
}

#nav li {
	display:block;
	float:left;
	width:14px;
	height:14px; line-height:14px;
	-webkit-border-radius:7px;
	background:rgba(255,255,255,0.1);
	overflow:hidden;
	padding:0;
	margin:3px 11px 0 0;
	text-align:center;
}

#nav li#prev {
	margin-left:5px;
	background:transparent;
}

#nav li#next {
	margin-right:0;
	background:transparent;
}

#nav li.selected {
	background:rgba(255,255,255,0.4);
}

#swipeview-slider > div {
	position:relative;
	top:50%;
	display:-webkit-box;
	-webkit-box-orient:vertical;
	-webkit-box-pack:center;
	-webkit-box-align:center;
	overflow:hidden;
}

#swipeview-slider img {
	display:block;
	border:5px solid #eee;
	-webkit-box-shadow:0 2px 6px #000;
	-webkit-border-radius:2px;
	-webkit-box-reflect: below 5px -webkit-gradient(linear, left top, left bottom, from(transparent), color-stop(75%, transparent) , to(rgba(250, 250, 250, 0.2)));
	-webkit-transition-duration:.4s;
	-webkit-transition-property:opacity;
	opacity:1;
	pointer-events:none;
	box-shadow: 4px 4px 2px rgba(0, 0, 0, 0.4);
}

#swipeview-slider span {
	position:absolute;
	bottom:0;
	left:0;
	width:100%;
	padding:20px 0;
	display:block;
	background:rgba(0,0,0,0.75);
	font-size:24px;
	text-align:center;
	text-shadow:0 1px 0 #000;
	border-top:1px solid rgba(255,255,255,0.2);
	-webkit-border-top-left-radius:10px;
	-webkit-border-top-right-radius:10px;
	-webkit-transition-duration:.3s;
	-webkit-transition-property:-webkit-transform;
	-webkit-transform:translate3d(0,100%,0);
}

#swipeview-slider .swipeview-active span {
	-webkit-transform:translate3d(0,0,0);
}

#wrapper > div > .swipeview-loading {
	background-image:-webkit-gradient(linear, 0 0, 0 100%, from(#444), to(#555)),
		-webkit-gradient(linear, 0 0, 100% 0, from(#777), to(#777));
	background-position:50% 50%, 50% 50%;
	background-size:200px 140px, 210px 150px;
	background-repeat:no-repeat;
}

#wrapper > div > .swipeview-loading img,
#swipeview-slider img.loading {
	-webkit-transition-duration:0;
	opacity:0;
}

#wrapper > div > .swipeview-loading span {
	-webkit-transition-duration:0;
	-webkit-transform:translate3d(0,100%,0);
}

/* menu */
body,ul,li {
	padding:0;
	margin:0;
	border:0;
}

#header {
	position:absolute; z-index:10101;
	top:0; left:0;
	width:100%;
	height:45px;
	line-height:45px;
	background-image:-webkit-gradient(linear, 0 0, 0 100%, color-stop(0, #808080), color-stop(0.05, #D0D0D0), color-stop(1, #808080));
	background-image:-moz-linear-gradient(top, #808080, #C0C0C0 5%, #202020);
	background-image:-o-linear-gradient(top, #808080, #C0C0C0 5%, #202020);
	padding:0;
	color:#eee;
	font-size:20px;
	text-align:center;
}

#header a {
	color:#f3f3f3;
	text-decoration:none;
	font-weight:bold;
	text-shadow:0 -1px 0 rgba(0,0,0,0.5);
}

#footer {
	position:absolute; z-index:10101;
	bottom:0; left:0;
	width:100%;
	height:48px;
	background-image:-webkit-gradient(linear, 0 0, 0 100%, color-stop(0, #999), color-stop(0.02, #666), color-stop(1, #222));
	background-image:-moz-linear-gradient(top, #999, #666 2%, #222);
	background-image:-o-linear-gradient(top, #999, #666 2%, #222);
	padding:0;
	border-top:1px solid #444;
}

a, a:hover, a:active, a:visited, a:focus {color: white; text-decoration: none; outline: none; border:none; outline:none;}
</style>
<script>
function obj(id) {return document.getElementById(id);}

var isPS3 = (navigator.userAgent.toLowerCase().indexOf('playstation 3') > -1);
var isFireFox = (navigator.userAgent.toLowerCase().indexOf('firefox') > -1);
var isMSIE = !isFireFox && (navigator.userAgent.toLowerCase().indexOf('trident') > -1);
var nextEl, indexEl=0, url = 'http://ps3.aldostools.org';

(function(){
var m = Math,
	mround = function (r) { return r >> 0; },
	vendor = (/webkit/i).test(navigator.appVersion) ? 'webkit' :
		(/firefox/i).test(navigator.userAgent) ? 'Moz' :
		'opera' in window ? 'O' : '',

	// Browser capabilities
	isAndroid = (/android/gi).test(navigator.appVersion),
	isIDevice = (/iphone|ipad/gi).test(navigator.appVersion),
	isPlaybook = (/playbook/gi).test(navigator.appVersion),
	isTouchPad = (/hp-tablet/gi).test(navigator.appVersion),

	has3d = 'WebKitCSSMatrix' in window && 'm11' in new WebKitCSSMatrix(),
	hasTouch = 'ontouchstart' in window && !isTouchPad,
	hasTransform = vendor + 'Transform' in document.documentElement.style,
	hasTransitionEnd = isIDevice || isPlaybook,

	nextFrame = (function() {
		return window.requestAnimationFrame
			|| window.webkitRequestAnimationFrame
			|| window.mozRequestAnimationFrame
			|| window.oRequestAnimationFrame
			|| window.msRequestAnimationFrame
			|| function(callback) { return setTimeout(callback, 1); }
	})(),
	cancelFrame = (function () {
		return window.cancelRequestAnimationFrame
			|| window.webkitCancelRequestAnimationFrame
			|| window.mozCancelRequestAnimationFrame
			|| window.oCancelRequestAnimationFrame
			|| window.msCancelRequestAnimationFrame
			|| clearTimeout
	})(),

	// Events
	RESIZE_EV = 'onorientationchange' in window ? 'orientationchange' : 'resize',
	START_EV = hasTouch ? 'touchstart' : 'mousedown',
	MOVE_EV = hasTouch ? 'touchmove' : 'mousemove',
	END_EV = hasTouch ? 'touchend' : 'mouseup',
	CANCEL_EV = hasTouch ? 'touchcancel' : 'mouseup',
	WHEEL_EV = (vendor == 'Moz') ? 'DOMMouseScroll' : 'mousewheel',

	// Helpers
	trnOpen = 'translate' + (has3d ? '3d(' : '('),
	trnClose = has3d ? ',0)' : ')',

	// Constructor
	iScroll = function (el, options) {
		var that = this,
			doc = document,
			i;

		that.wrapper = typeof el == 'object' ? el : doc.getElementById(el);
		//that.wrapper.style.overflow = 'hidden';
		//that.scroller = that.wrapper.children[0];

		// Default options
		that.options = {
			hScroll: false,
			vScroll: true,
			x: 0,
			y: 0,
			bounce: true,
			bounceLock: false,
			momentum: true,
			lockDirection: true,
			useTransform: true,
			useTransition: false,
			topOffset: 0,
			checkDOMChanges: true,		// Experimental

			// Scrollbar
			hScrollbar: false,
			vScrollbar: true,
			fixedScrollbar: isAndroid,
			hideScrollbar: isIDevice,
			fadeScrollbar: isIDevice && has3d,
			scrollbarClass: '',

			// Zoom
			zoom: false,
			zoomMin: 1,
			zoomMax: 4,
			doubleTapZoom: 2,
			wheelAction: 'scroll',

			// Snap
			snap: false,
			snapThreshold: 50,

			// Events
			onRefresh: null,
			onBeforeScrollStart: function (e) { e.preventDefault(); },
			onScrollStart: null,
			onBeforeScrollMove: null,
			onScrollMove: null,
			onBeforeScrollEnd: null,
			onScrollEnd: null,
			onTouchEnd: null,
			onDestroy: null,
			onZoomStart: null,
			onZoom: null,
			onZoomEnd: null
		};

		// User defined options
		for (i in options) that.options[i] = options[i];

		// Set starting position
		that.x = that.options.x;
		that.y = that.options.y;

		// Normalize options
		that.options.useTransform = hasTransform ? that.options.useTransform : false;
		that.options.hScrollbar = that.options.hScroll && that.options.hScrollbar;
		that.options.vScrollbar = that.options.vScroll && that.options.vScrollbar;
		that.options.zoom = that.options.useTransform && that.options.zoom;
		that.options.useTransition = hasTransitionEnd && that.options.useTransition;

		// Helpers FIX ANDROID BUG!
		// translate3d and scale doesn't work together!
		// Ignoring 3d ONLY WHEN YOU SET that.options.zoom
		if ( that.options.zoom && isAndroid ){
			trnOpen = 'translate(';
			trnClose = ')';
		}

		// Set some default styles
		that.scroller.style[vendor + 'TransitionProperty'] = that.options.useTransform ? '-' + vendor.toLowerCase() + '-transform' : 'top left';
		that.scroller.style[vendor + 'TransitionDuration'] = '0';
		that.scroller.style[vendor + 'TransformOrigin'] = '0 0';
		if (that.options.useTransition) that.scroller.style[vendor + 'TransitionTimingFunction'] = 'cubic-bezier(0.33,0.66,0.66,1)';

		if (that.options.useTransform) that.scroller.style[vendor + 'Transform'] = trnOpen + that.x + 'px,' + that.y + 'px' + trnClose;
		else that.scroller.style.cssText += ';position:absolute;top:' + that.y + 'px;left:' + that.x + 'px';

		if (that.options.useTransition) that.options.fixedScrollbar = true;

		that.refresh();

		that._bind(RESIZE_EV, window);
		that._bind(START_EV);
		if (!hasTouch) {
			that._bind('mouseout', that.wrapper);
			if (that.options.wheelAction != 'none')
				that._bind(WHEEL_EV);
		}

		if (that.options.checkDOMChanges) that.checkDOMTime = setInterval(function () {
			that._checkDOMChanges();
		}, 500);
	};

})();
var SwipeView = (function (window, document) {
	var numberOfImages=0,gTransitionDuration=500,percent=24;

	var dummyStyle = document.createElement('div').style,
		vendor = (function () {
			var vendors = 't,webkitT,MozT,msT,OT'.split(','),
				t,
				i = 0,
				l = vendors.length;

			for ( ; i < l; i++ ) {
				t = vendors[i] + 'ransform';
				if ( t in dummyStyle ) {
					return vendors[i].substr(0, vendors[i].length - 1);
				}
			}

			return false;
		})(),
		cssVendor = vendor ? '-' + vendor.toLowerCase() + '-' : '',

		// Style properties
		transform = prefixStyle('transform'),
		transitionDuration = prefixStyle('transitionDuration'),

		// Browser capabilities
		has3d = prefixStyle('perspective') in dummyStyle,
		hasTouch = 'ontouchstart' in window,
		hasTransform = !!vendor,
		hasTransitionEnd = prefixStyle('transition') in dummyStyle,

		// Helpers
		translateZ = has3d ? ' translateZ(0)' : '',

		// Events
		resizeEvent = 'onorientationchange' in window ? 'orientationchange' : 'resize',
		startEvent = hasTouch ? 'touchstart' : 'mousedown',
		moveEvent = hasTouch ? 'touchmove' : 'mousemove',
		endEvent = hasTouch ? 'touchend' : 'mouseup',
		cancelEvent = hasTouch ? 'touchcancel' : 'mouseup',
		transitionEndEvent = (function () {
			if ( vendor === false ) return false;

			var transitionEnd = {
					''			: 'transitionend',
					'webkit'	: 'webkitTransitionEnd',
					'Moz'		: 'transitionend',
					'O'			: 'oTransitionEnd',
					'ms'		: 'MSTransitionEnd'
				};

			return transitionEnd[vendor];
		})(),

		SwipeView = function (el, options) {
			var i=0,
				div='',
				className='',
				pageIndex=0;

			this.wrapper = typeof el == 'string' ? document.querySelector(el) : el;
			this.options = {
				text: null,
				numberOfPages: numberOfImages,
				snapThreshold: null,
				hastyPageFlip: false,
				loop: true,
			};

			if(isPS3 || isFireFox )
				percent=Math.ceil(42000 / this.wrapper.clientWidth);
			else
				percent=Math.ceil(25000 / this.wrapper.clientWidth);

			// User defined options
			for (i in options) this.options[i] = options[i];

			this.wrapper.style.overflow = 'hidden';
			this.wrapper.style.position = 'relative';

			this.masterPages = [];

			div = document.createElement('div');
			div.id = 'swipeview-slider';
			div.style.cssText = 'position:relative;top:0;height:100%;width:100%;' + cssVendor + 'transition-duration:0;' + cssVendor + 'transform:translateZ(0);' + cssVendor + 'transition-timing-function:ease-out;';

			this.wrapper.appendChild(div);
			this.slider = div;

			this.refreshSize();

			// Initialize images
			for (i=0; i<=numberOfImages; i++) {
				div = document.createElement('div');
				div.id = 'swipeview-masterpage-' + i;

				div.style.cssText = cssVendor + 'transform:translateZ(0);position:absolute;top:0;height:100%;width:100%;left:' + (i-1)*percent + '%';

				if (!div.dataset) div.dataset = {};

				if(numberOfImages == 2)
					pageIndex = (i+1) % 2;
				else
					pageIndex = (i == 0) ? (numberOfImages - 1) : (i - 1);

				div.dataset.pageIndex = pageIndex;
				div.dataset.upcomingPageIndex = pageIndex;

				if (!this.options.loop && i == 0) div.style.visibility = 'hidden';

				this.slider.appendChild(div);
				this.masterPages.push(div);
			}

			if(numberOfImages<=2) this.__checkPosition();
			else
			{
				className = this.masterPages[1].className;
				this.masterPages[1].className = !className ? 'swipeview-active' : className + ' swipeview-active';
				this.__flip();
				this.__hilight();
			}

			window.addEventListener(resizeEvent, this, false);
			this.wrapper.addEventListener(startEvent, this, false);
			this.wrapper.addEventListener(moveEvent, this, false);
			this.wrapper.addEventListener(endEvent, this, false);
			this.slider.addEventListener(transitionEndEvent, this, false);
			// in Opera >= 12 the transitionend event is lowercase so we register both events
			if ( vendor == 'O' ) this.slider.addEventListener(transitionEndEvent.toLowerCase(), this, false);

/*			if (!hasTouch) {
				this.wrapper.addEventListener('mouseout', this, false);
			}*/
		};

	// Prototype
	SwipeView.prototype = {
		currentMasterPage: 1,
		x: 0,
		page: 0,
		pageIndex: 0,
		customEvents: [],

		onFlip: function (fn) {
			this.wrapper.addEventListener('swipeview-flip', fn, false);
			this.customEvents.push(['flip', fn]);
		},

		onMoveOut: function (fn) {
			this.wrapper.addEventListener('swipeview-moveout', fn, false);
			this.customEvents.push(['moveout', fn]);
		},

		onMoveIn: function (fn) {
			this.wrapper.addEventListener('swipeview-movein', fn, false);
			this.customEvents.push(['movein', fn]);
		},

		onTouchStart: function (fn) {
			this.wrapper.addEventListener('swipeview-touchstart', fn, false);
			this.customEvents.push(['touchstart', fn]);
		},

		destroy: function () {
			while ( this.customEvents.length ) {
				this.wrapper.removeEventListener('swipeview-' + this.customEvents[0][0], this.customEvents[0][1], false);
				this.customEvents.shift();
			}

			// Remove the event listeners
			window.removeEventListener(resizeEvent, this, false);
			this.wrapper.removeEventListener(startEvent, this, false);
			this.wrapper.removeEventListener(moveEvent, this, false);
			this.wrapper.removeEventListener(endEvent, this, false);
			this.slider.removeEventListener(transitionEndEvent, this, false);

/*			if (!hasTouch) {
				this.wrapper.removeEventListener('mouseout', this, false);
			}*/
		},

		refreshSize: function () {
			numberOfImages = this.options.numberOfPages;
			this.wrapperWidth = this.wrapper.clientWidth;
			this.wrapperHeight = this.wrapper.clientHeight;
			this.pageWidth = this.wrapperWidth * (percent/100);
			this.maxX = -numberOfImages * this.pageWidth + this.wrapperWidth;
			this.snapThreshold = this.options.snapThreshold === null ?
				Math.round(this.pageWidth * 0.15) :
				/%/.test(this.options.snapThreshold) ?
					Math.round(this.pageWidth * this.options.snapThreshold.replace('%', '') / percent) :
					this.options.snapThreshold;
		},

		updatePageCount: function (n) {
			numberOfImages = n;
			this.options.numberOfPages = n;
			this.maxX = -numberOfImages * this.pageWidth + this.wrapperWidth;
		},

		goToPage: function (p) {
			if(numberOfImages<=1) return;
			var oldTransitionDuration=gTransitionDuration;

			gTransitionDuration=3; // hide animation

			while(this.pageIndex>p) this.prev();
			while(this.pageIndex<p) this.next();

			gTransitionDuration=oldTransitionDuration;
		},

		next: function () {
			if(numberOfImages <= 1) return;
			if (!this.options.loop && (this.pageIndex >= (numberOfImages-1))) return;

			if(numberOfImages == 2)
			{
				if(this.pageIndex == 0) this.pageIndex = 1; else this.pageIndex = 0;
				this.directionX = 1;
				this.x += 1;
				this.__checkPosition();
			}

			this.directionX = -1;
			this.x -= 1;
			this.__checkPosition();
			this.__flip();
		},

		prev: function () {
			if(numberOfImages <= 1) return;
			if (!this.options.loop && this.pageIndex <= 0) return;

			if(numberOfImages == 2)
			{
				if(this.pageIndex == 0) this.pageIndex = 1; else this.pageIndex = 0;
				this.directionX = -1;
				this.x -= 1;
				this.__checkPosition();
			}

			this.directionX = 1;
			if(this.pageIndex <= 0) {this.x += 1; this.__flip();}
			this.x += 1;
			this.__checkPosition();
			this.__flip();
		},

		refreshPos: function () {
			if(numberOfImages <= 1) return;

			this.directionX = 0;
			this.__checkPosition();
			this.__flip();
		},

		handleEvent: function (e) {
			switch (e.type) {
				case startEvent:
					this.__start(e);
					break;
				case moveEvent:
					this.__move(e);
					break;
				case cancelEvent:
				case endEvent:
					this.__end(e);
					break;
				case resizeEvent:
					this.__resize();
					break;
				case transitionEndEvent:
				case 'otransitionend':
					if (e.target == this.slider && !this.options.hastyPageFlip) this.__flip();
					this.refreshPos();
					break;
			}
		},


		/**
		*
		* Pseudo private methods
		*
		*/
		__pos: function (x) {
			this.x = x;
			this.slider.style[transform] = 'translate(' + x + 'px,0)' + translateZ;
		},

		__resize: function () {
			this.refreshSize();
			this.slider.style[transitionDuration] = '0s';
			this.__pos(-this.page * this.pageWidth * (percent/100));
		},

		__start: function (e) {
			//e.preventDefault();

			if (this.initiated) return;

			if(numberOfImages<=1) return;

			var point = hasTouch ? e.touches[0] : e;

			this.initiated = true;
			this.moved = false;
			this.thresholdExceeded = false;
			this.startX = point.pageX;
			this.startY = point.pageY;
			this.pointX = point.pageX;
			this.pointY = point.pageY;
			this.stepsX = 0;
			this.stepsY = 0;
			this.directionX = 0;
			this.directionLocked = false;

/*			var matrix = getComputedStyle(this.slider, null).webkitTransform.replace(/[^0-9-.,]/g, '').split(',');
			this.x = matrix[4] * 1;*/

			this.slider.style[transitionDuration] = '0s';

			this.__event('touchstart');
		},

		__move: function (e) {
			if (!this.initiated) return;

			if(numberOfImages<=1) return;

			var point = hasTouch ? e.touches[0] : e,
				deltaX = point.pageX - this.pointX,
				deltaY = point.pageY - this.pointY,
				newX = this.x + deltaX,
				dist = Math.abs(point.pageX - this.startX);

			this.moved = true;
			this.pointX = point.pageX;
			this.pointY = point.pageY;
			this.directionX = deltaX > 0 ? 1 : deltaX < 0 ? -1 : 0;
			this.stepsX += Math.abs(deltaX);
			this.stepsY += Math.abs(deltaY);

			// We take a 10px buffer to figure out the direction of the swipe
			if (this.stepsX < 10 && this.stepsY < 10)
			{
//				e.preventDefault();
				return;
			}

			// We are scrolling vertically, so skip SwipeView and give the control back to the browser
			if (!this.directionLocked && this.stepsY > this.stepsX)
			{
				this.initiated = false;
				return;
			}

			e.preventDefault();

			this.directionLocked = true;

			if (!this.options.loop && (newX > 0 || newX < this.maxX))
			{
				newX = this.x + (deltaX / 2);
			}

			if (!this.thresholdExceeded && dist >= this.snapThreshold)
			{
				this.thresholdExceeded = true;
				this.__event('moveout');
			}
			else if (this.thresholdExceeded && dist < this.snapThreshold)
			{
				this.thresholdExceeded = false;
				this.__event('movein');
			}

/*			if (newX > 0 || newX < this.maxX) {
				newX = this.x + (deltaX / 2);
			}*/

			this.__pos(newX);
		},

		__end: function (e) {
			if (!this.initiated) return;

			var point = hasTouch ? e.changedTouches[0] : e,
				dist = Math.abs(point.pageX - this.startX);

			this.initiated = false;

			if (!this.moved) return;

			if (numberOfImages == 2)
			{
				this.prev();
				return;
			}
			else
			if (!this.options.loop && (this.x > 0 || this.x < this.maxX))
			{
				dist = 0;
				this.__event('movein');
			}

			this.__flip();

			// Check if we exceeded the snap threshold
			if (dist < this.snapThreshold)
			{
				this.slider.style[transitionDuration] = Math.floor(300 * dist / this.snapThreshold) + 'ms';

				this.__pos(-this.page * this.pageWidth * (percent/100));
				return;
			}

			this.__checkPosition();
		},

		__checkPosition: function () {
			var pageFlip,
				pageFlipIndex,
				className;

			this.masterPages[this.currentMasterPage].className = this.masterPages[this.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/, '');

			if(numberOfImages == 2) {this.directionX = 1; this.x++;}

			// Flip the page
			if (this.directionX > 0)
			{
				// <--
				this.page = -Math.ceil(this.x / this.pageWidth);
				this.currentMasterPage = (this.page + 1) - Math.floor((this.page + 1) / numberOfImages) * numberOfImages;
				this.pageIndex = (--this.pageIndex < 0) ? (numberOfImages - 1) : this.pageIndex ;

				pageFlip = this.currentMasterPage - 1;
				pageFlip = (pageFlip < 0) ? (numberOfImages - 1): pageFlip;

				this.masterPages[pageFlip].style.left = (this.page-1) * percent + '%';

				pageFlipIndex = this.page - 1;
			}
			else if (this.directionX < 0)
			{
				// -->
				this.page = -Math.floor(this.x / this.pageWidth);
				this.currentMasterPage = (this.page + 1) - Math.floor((this.page + 1) / numberOfImages) * numberOfImages;
				this.pageIndex = this.pageIndex >= (numberOfImages - 1) ? 0 : this.pageIndex + 1;

				pageFlip = this.currentMasterPage + 1;
				pageFlip = (pageFlip > (numberOfImages - 1)) ? 0 : pageFlip;

				if(numberOfImages<=2)
					this.masterPages[pageFlip].style.left = '0%';
				else
					this.masterPages[pageFlip].style.left = (this.page+1) * percent + '%';

				pageFlipIndex = this.page + 1;
			}

			// Add active class to current page
			className = this.masterPages[this.currentMasterPage].className;
			/(^|\s)swipeview-active(\s|$)/.test(className) || (this.masterPages[this.currentMasterPage].className = !className ? 'swipeview-active' : className + ' swipeview-active');

			this.__hilight();

			// Add loading class to flipped page
			className = this.masterPages[pageFlip].className;
			/(^|\s)swipeview-loading(\s|$)/.test(className) || (this.masterPages[pageFlip].className = !className ? 'swipeview-loading' : className + ' swipeview-loading');

			pageFlipIndex = pageFlipIndex - Math.floor(pageFlipIndex / numberOfImages) * numberOfImages;
			this.masterPages[pageFlip].dataset.upcomingPageIndex = pageFlipIndex;		// Index to be loaded in the newly flipped page

			newX = -this.page * this.pageWidth;

			if(!isPS3) this.slider.style[transitionDuration] = Math.floor(gTransitionDuration * Math.abs(this.x - newX) / this.pageWidth) + 'ms';

			// Hide the next page if we decided to disable looping
			if (!this.options.loop)
			{
				this.masterPages[pageFlip].style.visibility = ((newX === 0) || (this.pageIndex >= (numberOfImages - 1))) ? 'hidden' : '';
			}

			if (this.x == newX)
			{
				this.__flip();		// If we swiped all the way long to the next page (extremely rare but still)
			}
			else
			{
				this.__pos(newX);
				if (this.options.hastyPageFlip) this.__flip();
			}
		},

		__hilight: function () {
			if(isPS3)
			{
				for(var i=0; i<numberOfImages; i++)
					if(this.masterPages[i].style.opacity!=0.4) {this.masterPages[i].style.opacity=0.4; this.masterPages[i].style.zoom='100%'; }

				this.masterPages[this.currentMasterPage].style.zoom='180%';
			}
			else if(isMSIE)
			{
				var elem;

				for(var i=0; i<numberOfImages; i++)
				{
					this.masterPages[i].style.opacity=0.5;
					this.masterPages[i].style.top='20%';

					elem = obj('pic' + i);
					if(elem && elem.style.zoom!='60%') {elem.style.zoom='60%'; elem.style.top = '10%';}

					elem = obj('span' + i);
					if(elem) elem.style.display = 'none';
				}

				this.masterPages[this.currentMasterPage].style.zoom='100%';
				this.masterPages[this.currentMasterPage].style.top=0;

				{
					elem = obj('span' + this.currentMasterPage);
					if(elem) elem.style.display = '';

					elem = obj('pic' + this.currentMasterPage);
					if(elem && elem.style.zoom != '100%') {elem.style.zoom = '100%'; elem.style.top = '20%'; elem.style.zIndex=50000;}
				}
			}
			else if(isFireFox)
			{
				for(var i=0; i<numberOfImages; i++)
					if(this.masterPages[i].style.opacity!=0.25) {this.masterPages[i].style.opacity=0.25; }
			}
			else
			{
				for(var i=0; i<numberOfImages; i++)
					if(this.masterPages[i].style.opacity!=0.6) {this.masterPages[i].style.opacity=0.6; this.masterPages[i].style.zoom='60%'; }

				this.masterPages[this.currentMasterPage].style.zoom='100%';
			}

			this.masterPages[this.currentMasterPage].style.opacity=100;
			this.masterPages[this.currentMasterPage].style.zIndex=9999;
		},

		__flip: function () {
			this.__event('flip');
			this.pageIndex = this.pageIndex % slides.length;

			var p = this.pageIndex+1;

			this.masterPages[p].style.zIndex = p;
			if(p>0) this.masterPages[p-1].style.zIndex = p-1;
			if(p<numberOfImages) this.masterPages[p+1].style.zIndex = p-1;

			for (var i=0; i<numberOfImages; i++) {
				if(i<=p && i>(p-4)) this.masterPages[i].style.zIndex = i;
				if(i>p  && i<(p+4)) this.masterPages[i].style.zIndex = 2*this.pageIndex-i;
				this.masterPages[i].className = this.masterPages[i].className.replace(/(^|\s)swipeview-loading(\s|$)/, ''); // Remove the loading class
				this.masterPages[i].dataset.pageIndex = this.masterPages[i].dataset.upcomingPageIndex;
			}
		},

		__event: function (type) {
			var ev = document.createEvent("Event");

			ev.initEvent('swipeview-' + type, true, true);

			this.wrapper.dispatchEvent(ev);
		}
	};

	function prefixStyle (style) {
		if ( vendor === '' ) return style;

		style = style.charAt(0).toUpperCase() + style.substr(1);
		return vendor + style;
	}

	return SwipeView;
})(window, document);
</script>

<body ondragstart="return false" onselectstart="return false" bgcolor="#000000">
<div id="wrapper"></div>
<div id="curpage" style="position:absolute;left:10px;top:15px;font-size:20px;"></div>
<div id="prev-page" style="position:absolute;left: 2%;top:40%;font-size:60px;z-index:9999;"><a id="nav-left"  href="javascript:void(0);" onmousedown="javascript:timer = setInterval(function(){gallery.prev();},100);this.style.color='white';" style="color:#404040;opacity:0.33;" onmousemove="this.style.color='#808080';this.style.opacity=1;" onmouseup="clearInterval(timer);" onmouseout="clearInterval(timer);this.style.color='#404040';this.style.opacity=0.33;">&#9664;</div>
<div id="next-page" style="position:absolute;right:2%;top:40%;font-size:60px;z-index:9999;"><a id="nav-right" href="javascript:void(0);" onmousedown="javascript:timer = setInterval(function(){gallery.next();},100);this.style.color='white';" style="color:#404040;opacity:0.33;" onmousemove="this.style.color='#808080';this.style.opacity=1;" onmouseup="clearInterval(timer);" onmouseout="clearInterval(timer);this.style.color='#404040';this.style.opacity=0.33;">&#9654;</div>

<!--<script type="text/javascript" src="/dev_hdd0/xmlhost/game_plugin/combolist.js"></script>-->
<script type="text/javascript" src="combolist.js"></script>

<script type="text/javascript">
var gallery,
	el,
	i,
	page, curPage=0;


function get(name, defaultval)
{
	if(name=(new RegExp('[?&]'+encodeURIComponent(name)+'=([^&]*)')).exec(location.search))
		return decodeURIComponent(name[1])+"";
	else
		return defaultval;
}

function refreshScreen()
{
	curPage=gallery.pageIndex+1;
}

function findNextTabStop(el) {
	var universe = document.querySelectorAll('a[href]');
	var list = Array.prototype.filter.call(universe, function(item) {return item.tabIndex >= "0" && item.parentNode.parentNode.parentNode.id=='scroller'});
	var index = list.indexOf(el);
	return list[index + 1] || list[0];
}

function findBackTabStop(el) {
	var universe = document.querySelectorAll('a[href]');
	var list = Array.prototype.filter.call(universe, function(item) {return item.tabIndex >= "0" && item.parentNode.parentNode.parentNode.id=='scroller'});
	var index = list.indexOf(el);
	return list[index - 1] || list[0];
}

function mountGame()
{
	var index = gallery.currentMasterPage - 1; if(index<0) index = slides.length - 1; 
	window.location=/*"http://" + location.host + "/mount.ps3"+*/ slides[index].url;
	gallery.destroy();
}

function keyDownEvent(e)
{
	var keyCode = e.keyCode;

	if(keyCode==37) gallery.prev();	// Right
	if(keyCode==39) gallery.next();	// Left
	if(keyCode==13) {e.preventDefault(); mountGame(); return;}
	if(keyCode==114) {e.preventDefault(); searchGame();}	//F3
	if(keyCode==116) {e.preventDefault(); refreshScreen();}	//F5

	if(obj('wrapper').style.display=='none')
	{
		if(keyCode==38) {nextEl = findBackTabStop(nextEl); nextEl.focus(); indexEl--; if(indexEl>0) {return;} indexEl=0;}
		if(keyCode==40 || keyCode==9) {nextEl = findNextTabStop(nextEl); nextEl.focus(); indexEl++; if(indexEl<13) {return;} indexEl=0;}

		if(keyCode==33 || keyCode==38) {if(myScroll.currPageY>0) myScroll.currPageY--; myScroll.scrollToPage(0,myScroll.currPageY,0);}	//pgup
		if(keyCode==34 || keyCode==40) {if(myScroll.currPageY<3) myScroll.currPageY++; myScroll.scrollToPage(0,myScroll.currPageY,0);}	//pgdn
		if(keyCode==36) myScroll.scrollToPage(0,0,0);		//home
		if(keyCode==35) myScroll.scrollToPage(0,1000,0);	//end
	}
	else
	{
		if(keyCode==36) {gallery.goToPage(0);}	//home
		if(keyCode==33) {for(i=0;i<5;i++)gallery.prev();}	//pgup
		if(keyCode==34) {for(i=0;i<5;i++)gallery.next();}	//pgdn
	}
}

var mouseX, mouseY;

function mousedownEvent(e)
{
	if (!e) e = window.event;

	if ((e.type && e.type == "contextmenu") || (e.button && e.button == 2) || (e.which && e.which == 3))
	{
		if (window.opera) window.alert("");
		return false;
	}

	if(obj('wrapper').style.display=='none') return;

	mouseX = event.clientX, mouseY = event.clientY;

	e = e || window.event;
	var target = e.target || e.srcElement;

	if(target.nodeName=='A' && target.id.substring(0,4)=='nav-') mouseY=0;
	//if(target.nodeName=='DIV') mouseY=0;
	//if(target.nodeName=='IMG') mouseY=0;

	if(target.nodeName=='A' && mouseY>80 && target.href.substring(0,4)=='java') {mountGame(); return false;}
}

function mouseupEvent(e)
{
	if(obj('wrapper').style.display=='none') return;
	if(mouseX == event.clientX && mouseY == event.clientY && mouseY > 80)
	{
		e = e || window.event;
		var target = e.target || e.srcElement;

		var index = gallery.currentMasterPage - 1; if(index<0) index = slides.length - 1;

		var w = obj('wrapper').clientWidth;
		if(mouseX > 50 && mouseX < ((w - slides[index].width - 30) / 2)) gallery.prev(); else
		if((mouseX > ((w + slides[index].width + 30) / 2)) && (mouseX < (w - 50))) gallery.next(); else
		{mountGame(); return;}
		gallery.refreshPos();
	}
}

function updatePage()
{
	if(curPage!=gallery.pageIndex)
	{
		obj('nav-left').style.color='#404040';
		obj('nav-right').style.color='#404040';
	}

	curPage=gallery.pageIndex;

	obj('curpage').innerHTML = '<a href="/setup.ps3" style="decoration:none;">' + (gallery.currentMasterPage == 0 ? slides.length : gallery.currentMasterPage) + ' / ' + slides.length + '</a>';
	setTimeout(updatePage, 600);
}

gallery = new SwipeView('#wrapper', { numberOfPages: slides.length });

var newlink;

// Load initial data
for (i=0; i<slides.length; i++) {
	page = i==0 ? slides.length-1 : i-1;

	newlink = document.createElement('A');
	newlink.title = slides[page].url.replace(/%20/g, " ");
	newlink.href = "javascript:void(0);";

	el = document.createElement('img');
	el.id = 'pic' + i;
	el.className = 'loading';
	el.src = slides[page].img;
	el.width = slides[page].width;
	el.height = slides[page].height;
	el.onload = function () { this.className = '';}
	el.style.position = 'relative';
	el.onerror= function () { this.src='/dev_hdd0/tmp/wm_icons/icon_wm_ps3.png'; };

	if(isFireFox)
	{
		el.style.top = '25%';
		el.style.left = (gallery.wrapper.clientWidth - el.width) / 2 + 'px';
	}
	else if(isMSIE)
	{
		el.style.top = '10%';
		el.style.left = (gallery.wrapper.clientWidth - el.width) / 2 + 'px';
	}

	newlink.appendChild(el);

	gallery.masterPages[i].appendChild(newlink);

	el = document.createElement('span');
	el.id = 'span' + i;
	el.innerHTML = '<a href="'+slides[page].url+'">'+slides[page].desc+'</a>';
	if(isPS3) el.style['-webkit-transition-duration'] = '0ms';
	if(isMSIE) el.style['display'] = 'none';

	gallery.masterPages[i].appendChild(el);
}

gallery.onFlip(function () {
	var el,
		upcoming,
		i;

	for (i=0; i<slides.length; i++) {
		upcoming = gallery.masterPages[i].dataset.upcomingPageIndex;

		if (upcoming != gallery.masterPages[i].dataset.pageIndex) {
			el = gallery.masterPages[i].querySelector('img');
			el.className = 'loading';
			el.src = slides[upcoming].img;
			el.width = slides[upcoming].width;
			el.height = slides[upcoming].height;

			el = gallery.masterPages[i].querySelector('span');
		}
	}
});

gallery.onMoveOut(function () {
	gallery.masterPages[gallery.currentMasterPage].className = gallery.masterPages[gallery.currentMasterPage].className.replace(/(^|\s)swipeview-active(\s|$)/, '');
});

gallery.onMoveIn(function () {
	var className = gallery.masterPages[gallery.currentMasterPage].className;
	/(^|\s)swipeview-active(\s|$)/.test(className) || (gallery.masterPages[gallery.currentMasterPage].className = !className ? 'swipeview-active' : className + ' swipeview-active');
});

curPage=get("g", 1)-1;

if(isMSIE) gallery.goToPage(curPage+1);

gallery.goToPage(curPage);

updatePage();

function animate()
{
	if(slides.length<1) return;

	var img = obj('pic'+ gallery.currentMasterPage).style;

	if(img.zoom=='100%') {img.zoom='102%';} else
	if(img.zoom=='102%') {img.zoom='103%';} else
	if(img.zoom=='103%') {img.zoom='101%';} else
	if(img.zoom=='101%') {img.zoom='99%'; } else
	if(img.zoom=='99%')  {img.zoom='98%'; } else {img.zoom='100%';}

	setTimeout(animate, 175);
}
setTimeout(animate, 1500);

function scrollWheel()
{
	if(event.wheelDelta> 3) gallery.prev();
	if(event.wheelDelta<-3) gallery.next();
}

function loaded() {

	window.addEventListener('orientationchange', refreshScreen);
	window.addEventListener('resize', refreshScreen);

	document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
	document.addEventListener("keydown", keyDownEvent, false);
	document.addEventListener("mouseup", mouseupEvent, false);
	document.addEventListener('mousewheel', scrollWheel, false);

	if (document.layers) document.captureEvents(Event.MOUSEDOWN);

	document.onmousedown = mousedownEvent;
	document.oncontextmenu = mousedownEvent;
}
document.addEventListener('DOMContentLoaded', loaded, false);
</script>
</body>
</html>
